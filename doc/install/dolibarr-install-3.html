<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="LinuxDoc-Tools 0.9.21">
 <TITLE>Dolibarr Installation: Annexe A - Fichiers de conf Apache</TITLE>
 <LINK HREF="dolibarr-install-2.html" REL=previous>
 <LINK HREF="dolibarr-install.html#toc3" REL=contents>
</HEAD>
<BODY>
Page suivante
<A HREF="dolibarr-install-2.html">Page précédente</A>
<A HREF="dolibarr-install.html#toc3">Table des matières</A>
<HR>
<H2><A NAME="s3">3.</A> <A HREF="dolibarr-install.html#toc3">Annexe A - Fichiers de conf Apache</A></H2>

<H2><A NAME="ss3.1">3.1</A> <A HREF="dolibarr-install.html#toc3.1">Fichier de config pour Apache 1.3</A>
</H2>

<P>Exemple pour l'authentification avec Pear</P>
<P>
<HR>
<PRE>
        #
        # Sample httpd.conf for dolibarr
        #
        &lt;VirtualHost dolibarr.lafrere.lan&gt;
        ServerAdmin webmaster.fr@lolix.org
        DocumentRoot /home/www/dolibarr/dolibarr/htdocs
        ServerName dolibarr.lafrere.lan
        ErrorLog  /home/www/dolibarr/logs/error.log
        CustomLog /home/www/dolibarr/logs/access.log combined
        
        ErrorDocument 401 /public/error-401.html

        php_flag register_globals on            
        
        &lt;/VirtualHost&gt;    
      
</PRE>
<HR>
</P>
<H2><A NAME="ss3.2">3.2</A> <A HREF="dolibarr-install.html#toc3.2">Fichier de config pour Apache 1.3 + mod_auth_mysql</A>
</H2>

<P>Cet exemple ne fonctionne pas sur la s&eacute;rie Apache 2, voir le fichier correspond dans la section suivante.</P>
<P>
<HR>
<PRE>
        #
        # Sample httpd.conf for dolibarr
        #
        &lt;VirtualHost dolibarr.lafrere.lan&gt;
        ServerAdmin webmaster.fr@lolix.org
        DocumentRoot /home/www/dolibarr/dolibarr/htdocs
        ServerName dolibarr.lafrere.lan
        ErrorLog  /home/www/dolibarr/logs/error.log
        CustomLog /home/www/dolibarr/logs/access.log combined
        
        ErrorDocument 401 /public/error-401.html

        php_flag register_globals on
                
        &lt;Location /&gt;
        Options Indexes FollowSymLinks
        AllowOverride All
        Order deny,allow
        Deny from all

        AuthType                                Basic
        
        # N'utilisez la ligne suivante que si vous utilisez aussi
        # le module d'authentification bas&eacute; sur postgresql
        #Auth_MySQL_Authoritative               on
        
        # Utilisez les lignes suivantes si le serveur Apache ne 
        # peut se logger en anonymous (ce qui est conseill&eacute; ;-)
        # rq. erics: sur ma debian je n'ai pas le droit de mettre ces
        # instructions dans un &lt;virtualhost&gt; ... (apache 1.3.27.0-2)
        #AuthMySQL_DefaultHost &lt;host&gt;
        #AuthMySQL_DefaultUser &lt;user&gt;
        #AuthMySQL_DefaultPassword &lt;pass&gt;
        
        Auth_MySQL_DB                   dolibarr
        Auth_MySQL_Password_Table               llx_user
        Auth_MySQL_Username_Field               login
        Auth_MySQL_Password_Field               pass
        
        # Pour l'instant les pass sont enregistr&eacute;s en clair
        # le stockage crypt&eacute; est dans la TODO
        
        Auth_MySQL_Encrypted_Passwords  off
        
        AuthName                                "Dolibarr"
        
        require valid-user
        satisfy any
        &lt;/Location&gt;
        
        &lt;Location /public/&gt;
        Options Indexes FollowSymLinks
        AllowOverride All
        Order deny,allow
        Allow from all
        &lt;/Location&gt;
        
        &lt;/VirtualHost&gt;    
      
</PRE>
<HR>
</P>
<H2><A NAME="ss3.3">3.3</A> <A HREF="dolibarr-install.html#toc3.3">Fichier de config pour Apache 2 + mod_auth_mysql + webmin</A>
</H2>



<P>
<HR>
<PRE>
      Options Indexes FollowSymLinks
      AllowOverride All
      Order deny,allow
      Deny from all
      
      AuthType Basic
      
      # N'utilisez la ligne suivante que si vous utilisez aussi
      # le module d'authentification bas&eacute; sur postgresql
      AuthMySQLAuthoritative on

      # Utilisez les lignes suivantes si le serveur Apache ne 
      # peut se logger en anonymous (ce qui est conseill&eacute; ;-)
      # rq. erics: sur ma debian je n'ai pas le droit de mettre ces
      # instructions dans un &lt;virtualhost&gt; ... (apache 1.3.27.0-2)
      #AuthMySQL_DefaultHost &lt;host&gt;
      #AuthMySQL_DefaultUser &lt;user&gt;
      #AuthMySQL_DefaultPassword &lt;pass&gt;

      AuthMySQLHost localhost
      AuthMySQLUser leDBuser
      AuthMySQLPassword leDBpass
      AuthMySQLDB dolibarr
      AuthMySQLUserTable llx_user
      AuthMySQLNameField login
      AuthMySQLPasswordField pass
      
      # Pour l'instant les pass sont enregistr&eacute;s en clair
      # le stockage crypt&eacute; est dans la TODO
      AuthMySQLCryptedPasswords off
      
      AuthName "Dolibarr"
      
      require valid-user
      Satisfy any
    
</PRE>
<HR>
</P>
<P>Pour les gens qui installent Dolibarr dans un r&eacute;pertoire,
utilisez Webmin et ajoutez une "Per-Directory Options" &agrave; votre
serveur virtuel. Utilisez "Location" comme "Type" et "/dolibarr"
comme "Path". Une fois cr&eacute;&eacute;e, editez les directives et copiez la
config ci-dessus, sauvez, restartez Apache et testez en allant &agrave;
domainname.com/dolibarr. Le navigateur va vous demander de taper
le login/pass.</P>
<P>Il faut cr&eacute;er des options pour chaque &lt;Location&gt; du fichier httpd.conf donn&eacute; en exemple.</P>
<P>Merci &agrave; la personne qui m'a transmis ces infos, et aux pr&eacute;c&eacute;dentes qui avaient fait de m&ecirc;me au sujet d'Apache 2</P>
<HR>
Page suivante
<A HREF="dolibarr-install-2.html">Page précédente</A>
<A HREF="dolibarr-install.html#toc3">Table des matières</A>
</BODY>
</HTML>
