<!-- $Id$ -->
<!-- $Source$ -->
<appendix id="annexe">Fichier de conf Apache

  <sect id="apa1">Fichier de config pour <prgn>Apache 1.3</prgn> + <prgn>mod_auth_mysql</prgn>

    <p>
      Cet exemple ne fonctionne pas sur la série Apache 2, voir le fichier correspond dans la section suivante.


      <example>
	#
	#
	# Sample httpd.conf for dolibarr
	#
	# $Id$
	# $Source$
	#
	&lt;VirtualHost dolibarr.lafrere.lan&gt;
	ServerAdmin webmaster.fr@lolix.org
	DocumentRoot /home/www/dolibarr/dolibarr/htdocs
	ServerName dolibarr.lafrere.lan
	ErrorLog  /home/www/dolibarr/logs/error.log
	CustomLog /home/www/dolibarr/logs/access.log combined
	
	ErrorDocument 401 /public/error-401.html
	
	&lt;Location /&gt;
	Options Indexes FollowSymLinks
	AllowOverride All
	Order deny,allow
	Deny from all
	
	AuthType 				Basic
	
	# N'utilisez la ligne suivante que si vous utilisez aussi
	# le module d'authentification basé sur postgresql
	#Auth_MySQL_Authoritative		on
	
	# Utilisez les lignes suivantes si le serveur Apache ne 
	# peut se logger en anonymous (ce qui est conseillé ;-)
	# rq. erics: sur ma debian je n'ai pas le droit de mettre ces
	# instructions dans un &lt;virtualhost&gt; ... (apache 1.3.27.0-2)
	#AuthMySQL_DefaultHost &lt;host&gt;
	#AuthMySQL_DefaultUser &lt;user&gt;
	#AuthMySQL_DefaultPassword &lt;pass&gt;
	
	Auth_MySQL_DB 			dolibarr
	Auth_MySQL_Password_Table 		llx_user
	Auth_MySQL_Username_Field 		login
	Auth_MySQL_Password_Field 		pass
	
	# Pour l'instant les pass sont enregistrés en clair
	# le stockage crypté est dans la TODO
	
	Auth_MySQL_Encrypted_Passwords 	off
	
	AuthName        			"Dolibarr"
	
	require valid-user
	satisfy any
	&lt;/Location&gt;
	
	&lt;Location /public/&gt;
	Options Indexes FollowSymLinks
	AllowOverride All
	Order deny,allow
	Allow from all
	&lt;/Location&gt;
	
	
	&lt;/VirtualHost&gt;
	
      </example>
      

    </p>

  <sect id="apa2">Fichier de config pour <prgn>Apache 2</prgn> + <prgn>mod_auth_mysql</prgn> + <prgn>webmin</prgn>
    <p>


    <example>
      Options Indexes FollowSymLinks
      AllowOverride All
      Order deny,allow
      Deny from all
      
      AuthType Basic
      
      # N'utilisez la ligne suivante que si vous utilisez aussi
      # le module d'authentification basé sur postgresql
      AuthMySQLAuthoritative on

      # Utilisez les lignes suivantes si le serveur Apache ne 
      # peut se logger en anonymous (ce qui est conseillé ;-)
      # rq. erics: sur ma debian je n'ai pas le droit de mettre ces
      # instructions dans un &lt;virtualhost&gt; ... (apache 1.3.27.0-2)
      #AuthMySQL_DefaultHost &lt;host&gt;
      #AuthMySQL_DefaultUser &lt;user&gt;
      #AuthMySQL_DefaultPassword &lt;pass&gt;

      AuthMySQLHost localhost
      AuthMySQLUser leDBuser
      AuthMySQLPassword leDBpass
      AuthMySQLDB dolibarr
      AuthMySQLUserTable llx_user
      AuthMySQLNameField login
      AuthMySQLPasswordField pass
      
      # Pour l'instant les pass sont enregistrés en clair
      # le stockage crypté est dans la TODO
      AuthMySQLCryptedPasswords off
      
      AuthName "Dolibarr"
      
      require valid-user
      Satisfy any
    </example>
    </p>  
    <p>
      Pour les gens qui installent Dolibarr dans un répertoire, utilisez Webmin et ajoutez une "Per-Directory Options" à votre serveur virtuel. Utilisez "Location" comme "Type" et "/dolibarr" comme "Path". Une fois créée, editez les directives et copiez la config ci-dessus, sauvez, restartez Apache et testez en allant à domainname.com/dolibarr. Le navigateur va vous demander de taper le login/pass.
      
      Il faut créer des options pour chaque &lt;Location&gt; du fichier httpd.conf donné en exemple.
    </p>
    
    <p>
      Merci à la personne qui m'a transmis ces infos, et aux précédentes qui avaient fait de même au sujet d'Apache 2
    </p>

  </sect>
  

</appendix>
<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:nil
sgml-shorttag:t
sgml-namecase-general:t
sgml-general-insert-case:lower
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:("dolibarr-user.sgml" "book" "chapt")
sgml-exposed-tags:nil
sgml-local-catalogs:nil
sgml-local-ecat-files:nil
End:
-->
