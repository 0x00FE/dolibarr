diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/bookmarks/fonctions.inc.php /var/www/html/dolibarr_dev/htdocs/bookmarks/fonctions.inc.php
--- /var/www/html/dolibarr/htdocs/bookmarks/fonctions.inc.php	1970-01-01 01:00:00.000000000 +0100
+++ /var/www/html/dolibarr_dev/htdocs/bookmarks/fonctions.inc.php	2009-01-21 22:41:44.000000000 +0100
@@ -0,0 +1,51 @@
+<?php
+
+	function printBookmarksList ($aDb, $aLangs) {
+		$db = $aDb;
+		$langs = $aLangs;
+		
+		require_once(DOL_DOCUMENT_ROOT."/bookmarks/bookmark.class.php");
+		
+		$bookm = new Bookmark($db);
+		
+		$langs->load("bookmarks");
+		
+		$ret = '';
+		$ret .= '<div class="blockvmenupair">';
+		
+			$ret .= '<div class="menu_titre">';
+				$ret .= '<a class="vsmenu" href="'.DOL_URL_ROOT.'/bookmarks/liste.php">'.$langs->trans('Bookm').'</a>';
+				$ret .= '<a class="vsmenu"" href="'.DOL_URL_ROOT.'/bookmarks/fiche.php?action=create"><img style="border: none; position: relative;" src="'.DOL_URL_ROOT.'/bookmarks/add.png" alt="'.$langs->trans('NewBookmark').'" title="'.$langs->trans('NewBookmark').'" /></a>';
+			$ret .= '</div>';
+			
+			$ret .= '<div class="menu_contenu">';
+			
+				$sql = "
+					SELECT rowid FROM ".MAIN_DB_PREFIX."bookmark
+					WHERE true
+				;";
+				
+				if ( $resql = $db->query($sql) ) {
+				
+					while ( $obj = $db->fetch_object($resql) ) {
+						
+						$bookm->fetch($obj->rowid);
+						
+						$ret .='<a class="vsmenu" title="'.$bookm->title.'" href="'.$bookm->url.'">'.dolibarr_trunc($bookm->title, 30).'</a><br />';
+					
+					}
+				
+				} else {
+				
+					dolibarr_print_error($db);
+				
+				}
+			
+			$ret .= '</div>';
+		
+		$ret .= '<div class="menu_fin"></div></div>';
+
+		return $ret;
+	}
+
+?>
\ Pas de fin de ligne à la fin du fichier.
diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/langs/fr_FR/bookmarks.lang /var/www/html/dolibarr_dev/htdocs/langs/fr_FR/bookmarks.lang
--- /var/www/html/dolibarr/htdocs/langs/fr_FR/bookmarks.lang	1970-01-01 01:00:00.000000000 +0100
+++ /var/www/html/dolibarr_dev/htdocs/langs/fr_FR/bookmarks.lang	2009-01-21 22:14:05.000000000 +0100
@@ -0,0 +1,4 @@
+# Dolibarr language file - fr_FR - marque pages
+CHARSET=ISO-8859-1
+Bookm=Marque pages
+NewBookmark=Nouveau marque page
\ Pas de fin de ligne à la fin du fichier.
diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/main.inc.php /var/www/html/dolibarr_dev/htdocs/main.inc.php
--- /var/www/html/dolibarr/htdocs/main.inc.php	2009-01-21 17:09:23.000000000 +0100
+++ /var/www/html/dolibarr_dev/htdocs/main.inc.php	2009-01-21 21:01:39.000000000 +0100
@@ -886,6 +886,15 @@
 		img_object($langs->trans("List"),'user').' '.$langs->trans("Members"), 'member', 'sall');
 	}
 
+	// Zone d'affichage permanente des marque pages
+	if ($conf->bookmark->enabled && $conf->global->MAIN_PERMANENT_BOOKMARKS && $user->rights->bookmark->lire)
+	{
+		include_once (DOL_DOCUMENT_ROOT.'/bookmarks/fonctions.inc.php');
+		$langs->load("bookmarks");
+		
+		$ret.=printBookmarksList($db, $langs);
+	}
+
 	if ($ret)
 	{
 		print "\n";
@@ -901,7 +910,7 @@
 	{
 		print $form_search;
 	}
-
+	
 	// Lien vers l'aide en ligne (uniquement si langue fr_FR)
 	if ($helppagename)
 	{
diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/output.patch /var/www/html/dolibarr_dev/output.patch
--- /var/www/html/dolibarr/output.patch	1970-01-01 01:00:00.000000000 +0100
+++ /var/www/html/dolibarr_dev/output.patch	2009-01-21 22:41:47.000000000 +0100
@@ -0,0 +1,93 @@
+diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/bookmarks/fonctions.inc.php /var/www/html/dolibarr_dev/htdocs/bookmarks/fonctions.inc.php
+--- /var/www/html/dolibarr/htdocs/bookmarks/fonctions.inc.php	1970-01-01 01:00:00.000000000 +0100
++++ /var/www/html/dolibarr_dev/htdocs/bookmarks/fonctions.inc.php	2009-01-21 22:41:44.000000000 +0100
+@@ -0,0 +1,51 @@
++<?php
++
++	function printBookmarksList ($aDb, $aLangs) {
++		$db = $aDb;
++		$langs = $aLangs;
++		
++		require_once(DOL_DOCUMENT_ROOT."/bookmarks/bookmark.class.php");
++		
++		$bookm = new Bookmark($db);
++		
++		$langs->load("bookmarks");
++		
++		$ret = '';
++		$ret .= '<div class="blockvmenupair">';
++		
++			$ret .= '<div class="menu_titre">';
++				$ret .= '<a class="vsmenu" href="'.DOL_URL_ROOT.'/bookmarks/liste.php">'.$langs->trans('Bookm').'</a>';
++				$ret .= '<a class="vsmenu"" href="'.DOL_URL_ROOT.'/bookmarks/fiche.php?action=create"><img style="border: none; position: relative;" src="'.DOL_URL_ROOT.'/bookmarks/add.png" alt="'.$langs->trans('NewBookmark').'" title="'.$langs->trans('NewBookmark').'" /></a>';
++			$ret .= '</div>';
++			
++			$ret .= '<div class="menu_contenu">';
++			
++				$sql = "
++					SELECT rowid FROM ".MAIN_DB_PREFIX."bookmark
++					WHERE true
++				;";
++				
++				if ( $resql = $db->query($sql) ) {
++				
++					while ( $obj = $db->fetch_object($resql) ) {
++						
++						$bookm->fetch($obj->rowid);
++						
++						$ret .='<a class="vsmenu" title="'.$bookm->title.'" href="'.$bookm->url.'">'.dolibarr_trunc($bookm->title, 30).'</a><br />';
++					
++					}
++				
++				} else {
++				
++					dolibarr_print_error($db);
++				
++				}
++			
++			$ret .= '</div>';
++		
++		$ret .= '<div class="menu_fin"></div></div>';
++
++		return $ret;
++	}
++
++?>
+\ Pas de fin de ligne à la fin du fichier.
+diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/langs/fr_FR/bookmarks.lang /var/www/html/dolibarr_dev/htdocs/langs/fr_FR/bookmarks.lang
+--- /var/www/html/dolibarr/htdocs/langs/fr_FR/bookmarks.lang	1970-01-01 01:00:00.000000000 +0100
++++ /var/www/html/dolibarr_dev/htdocs/langs/fr_FR/bookmarks.lang	2009-01-21 22:14:05.000000000 +0100
+@@ -0,0 +1,4 @@
++# Dolibarr language file - fr_FR - marque pages
++CHARSET=ISO-8859-1
++Bookm=Marque pages
++NewBookmark=Nouveau marque page
+\ Pas de fin de ligne à la fin du fichier.
+diff -Naur --exclude=add.png --exclude=html.formactions.class.php --exclude=paiement.php --exclude=CVS --exclude=synchro_dev.sh --exclude=recup_cvs.sh --exclude=patch.sh --exclude='.#*' --exclude='*~' --exclude='*.rej' --exclude='*.orig' --exclude='*.bak' --exclude=conf.php --exclude=documents /var/www/html/dolibarr/htdocs/main.inc.php /var/www/html/dolibarr_dev/htdocs/main.inc.php
+--- /var/www/html/dolibarr/htdocs/main.inc.php	2009-01-21 17:09:23.000000000 +0100
++++ /var/www/html/dolibarr_dev/htdocs/main.inc.php	2009-01-21 21:01:39.000000000 +0100
+@@ -886,6 +886,15 @@
+ 		img_object($langs->trans("List"),'user').' '.$langs->trans("Members"), 'member', 'sall');
+ 	}
+ 
++	// Zone d'affichage permanente des marque pages
++	if ($conf->bookmark->enabled && $conf->global->MAIN_PERMANENT_BOOKMARKS && $user->rights->bookmark->lire)
++	{
++		include_once (DOL_DOCUMENT_ROOT.'/bookmarks/fonctions.inc.php');
++		$langs->load("bookmarks");
++		
++		$ret.=printBookmarksList($db, $langs);
++	}
++
+ 	if ($ret)
+ 	{
+ 		print "\n";
+@@ -901,7 +910,7 @@
+ 	{
+ 		print $form_search;
+ 	}
+-
++	
+ 	// Lien vers l'aide en ligne (uniquement si langue fr_FR)
+ 	if ($helppagename)
+ 	{
